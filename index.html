<!DOCTYPE html>
<html>
<body>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
	<script>
    if (typeof web3 !== 'undefined') {
      // Use the browser's ethereum provider
      console.log("web3 from metamask");
      web3 = new Web3(web3.currentProvider);

  } else {
    console.log('No web3? You should consider trying MetaMask!')
    web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
  }

  var abi = 
  [
    {
      "constant": true,
      "inputs": [],
      "name": "creator",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "expensivePrice",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "name": "firms",
      "outputs": [
        {
          "name": "name",
          "type": "string"
        },
        {
          "name": "allowance",
          "type": "uint256"
        },
        {
          "name": "balance",
          "type": "uint256"
        },
        {
          "name": "used",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "name": "names",
      "outputs": [
        {
          "name": "",
          "type": "string"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "cheapPrice",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "buyer",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "CheapCreditsBought",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "buyer",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "ExpensiveCreditsBought",
      "type": "event"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "a",
          "type": "address"
        },
        {
          "name": "name",
          "type": "string"
        },
        {
          "name": "allowance",
          "type": "uint256"
        }
      ],
      "name": "registerFirm",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "a",
          "type": "address"
        },
        {
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "setUsed",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "buyCheapCredits",
      "outputs": [],
      "payable": true,
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "buyExpensiveCredits",
      "outputs": [],
      "payable": true,
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "defaultFirm",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "firm",
          "type": "address"
        },
        {
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "transferCredits",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ];

  // deployed on ropsten
  let address = "0xa6a8ce9df3e23551f0c8849c2778e62d66527080";
  var etsContract = web3.eth.contract(abi);
  ets = etsContract.at(address);

  // console.log(web3.eth.accounts[0]);
  // etsContract.methods.registerFirm(web3.eth.accounts[1], "foo", 100).send({ from: web3.eth.accounts[0] });

	</script>
  
   <picture style="position:absolute;left:200px"> 
   <img src="Background.png" alt="Model">
   </picture>
	
	<div>
		<strong>Smart Contract</strong>
    <div>Cheap price: <span id="cheap"></span> </div>
		<div>Expensive price: </div>
		<div>Credits in circulation: </div>
		<div>Return price: </div>
   </div>
	<br>
	<div>
		<strong>Company 1</strong>
		<div>Allowed: 100</div>
		<div>Credits:</div>
   </div>
	<br>
	<div>
		<strong>Company 2</strong>
		<div>Allowed: 100</div>
		<div>Credits:</div>
   </div>
	<br>
	<div>
		<strong>Renewable Energy</strong>
		<div>Money: </div>
		<div>Credits: </div>
   </div>
	<br>
	<div>
		<strong>Regulator</strong>
		<div>Allowed: 100</div>
		<div>Credits:</div>
   </div>
	<br>
	
<div style="position:absolute;left:80%;top:1%">
	<div><strong>Regulator</strong></div>
	<button id="setCheapPrice" type="button">Set Cheap Price:</button>
	$("#setCheapPrice").click(function(){
	Coursetro.setCheapPrice();
});
	<button type="button">Set Expensive Price:</button>
	<br>
	<button type="button">Set Allowances</button>
	<br>
	<button type="button">Burn Token</button>
	<br>
	<button type="button">Transfer Token</button>
	
	<br>
	<div><strong>Firm</strong></div>
	<button type="button">Buy Token</button><br>
	<button type="button">Transfer Token</button>
	
	<br>
	<div><strong>Renewable Energy</strong></div>
	<button type="button">Return Credits</button>

	</div>
  
	
</body>
</html>
